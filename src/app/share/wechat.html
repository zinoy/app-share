<div class="wrapper wrapper-content animated fadeInRight" ng-controller="ShareController as share">
  <div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-4">
      <h2>{{$state.current.data.pageTitle}}</h2>
      <ol class="breadcrumb">
        <li>
          <a ui-sref="share.index">Home</a>
        </li>
        <li class="active">
            <strong>{{$state.current.data.title}}</strong>
        </li>
      </ol>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="wrapper wrapper-content">
        <div class="ibox" global-alert>
          <!-- include app/share/global.html-->
        </div>
        <div class="ibox">
          <div class="ibox-title">
            <h5>HTML</h5>
            <div ibox-tools control="iboxTools"></div>
          </div>
          <div class="ibox-content">
            <ui-codemirror ui-codemirror-opts="share.htmlOptions" >&lt;!-- 在页面中引用微信JS -->
&lt;script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js">&lt;/script></ui-codemirror>
          </div>
        </div>
        <div class="ibox">
          <div class="ibox-title">
            <h5>签名接口</h5>
            <div ibox-tools control="iboxTools"></div>
          </div>
          <div class="ibox-content">
            <p>通过AJAX访问接口来获取签名，一般放置在jQuery/Zepto的ready事件里。常用签名接口如下：</p>
            <h4>别克签名接口</h4>
            <ui-codemirror ui-codemirror-opts="share.jsOptions">//别克微信签名
if(window.wx){//如果wx对象存在，
    $.post("http://www.buick.com.cn/weixinjssign/getbuicksign.aspx", 
        {signurl: window.location.href.replace(/#.*$/ig, "")}, wxConfig, "json");
}</ui-codemirror>
            <h4>雪佛兰签名接口</h4>
            <ui-codemirror ui-codemirror-opts="share.jsOptions">//雪佛兰微信签名
if(window.wx){//如果wx对象存在，
    $.post("http://www.chevrolet.com.cn/chevy-api/getsign.aspx", 
        {signurl: window.location.href.replace(/#.*$/ig, "")}, wxConfig, "json");
}</ui-codemirror>
            <h4>诚新二手车签名接口</h4>
            <ui-codemirror ui-codemirror-opts="share.jsOptions">//诚新二手车微信签名
if(window.wx){//如果wx对象存在，
    $.post("http://chengxinmobile.saic-gm.com/api/wexinsign.aspx", 
        {signurl: window.location.href.replace(/#.*$/ig, "")}, wxConfig, "json");
}</ui-codemirror>
            <hr />
            <h3>接口说明</h3>
            <h4>参数：</h4>
            <ul>
              <li><b>signurl</b>: <code>String</code> 请求签名的URL<br /><small>URL中不能包含锚点，但GET参数需要保留。 </small></li>
            </ul>
            <h4>返回：</h4>
            <ul>
              <li><b>status</b>: <code>Integer</code> 返回状态，可能的状态值参见<cite>表 1</cite></li>
              <li><b>appId</b>: <code>String</code> 公众号的唯一标识</li>
              <li><b>timestamp</b>: <code>String</code> 生成签名的时间戳</li>
              <li><b>nonceStr</b>: <code>String</code> 生成签名的随机串</li>
              <li><b>signature</b>: <code>String</code> 签名</li>
            </ul>
            <div class="row">
              <div class="col-lg-5">
                <p><span class="label label-primary">表 1</span></p>
                <table class="table table-bordered">
                  <thead>
                  <tr>
                    <th>status</th>
                    <th>说明</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td>0</td>
                    <td>成功</td>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>签名URL为空</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>签名URL中不能包含锚点（即删除 # 和后面部分）</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>异常操作</td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>签名失败</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="ibox">
          <div class="ibox-title">
            <h5>Javascript</h5>
            <div ibox-tools control="iboxTools"></div>
          </div>
          <div class="ibox-content">
          <p>定义配置的回调方法，需要注意的是，示例中只请求了两个接口，如果项目需要调用更多接口（如：扫描二维码、录音等），则需要修改 <code>jsApiList</code> 参数以获得对应的权限。<a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E9.99.84.E5.BD.952-.E6.89.80.E6.9C.89JS.E6.8E.A5.E5.8F.A3.E5.88.97.E8.A1.A8" target="_blank">官方文档 <i class="fa fa-external-link"></i></a></p>
            <ui-codemirror ui-codemirror-opts="share.jsOptions">function wxConfig(config) {
    config.debug = false;
    config.jsApiList = ["onMenuShareTimeline", "onMenuShareAppMessage"];
    wx.config(config);
    wx.ready(function() {
        console.info('wx_ok');
        wxShare();
    });
    wx.error(function(res) {
        console.error("wx err: " + res.errMsg);
    });
}
//如需要临时改变分享内容（如分享游戏结果）时可重复调用。
function wxShare() {
    wx.onMenuShareTimeline({
        title: __shareDef.title,
        desc: __shareDef.title,
        link: __shareDef.url,
        imgUrl: __shareDef.img,
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function() {
            // hylink.trackEvent("右上角分享", "右上角", "点击", "分享");
        },
        cancel: function() {/* 用户取消分享后执行的回调函数 */}
    });
    wx.onMenuShareAppMessage({
        title: __shareDef.title,
        desc: __shareDef.desc,
        link: __shareDef.url,
        imgUrl: __shareDef.img,
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function() {
            // hylink.trackEvent("右上角分享", "右上角", "点击", "分享");
        },
        cancel: function() {/* 用户取消分享后执行的回调函数 */}
    });
}</ui-codemirror>
          </div>
        </div>
        <div class="ibox">
          <div class="ibox-title">
            <h5>APP判断脚本</h5>
            <div ibox-tools control="iboxTools"></div>
          </div>
          <div class="ibox-content">
            <ui-codemirror ui-codemirror-opts="share.jsOptions">var isWechat = /MicroMessenger/i.test(window.navigator.userAgent);</ui-codemirror>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>