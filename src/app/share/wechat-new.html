<div class="wrapper wrapper-content animated fadeInRight" ng-controller="ShareController as share">
        <div class="row wrapper border-bottom white-bg page-heading">
          <div class="col-sm-4">
            <h2>{{$state.current.data.pageTitle}}</h2>
            <ol class="breadcrumb">
              <li>
                <a ui-sref="share.index">Home</a>
              </li>
              <li class="active">
                  <strong>{{$state.current.data.title}}</strong>
              </li>
            </ol>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="wrapper wrapper-content">

              <div class="ibox">
                <div class="ibox-title">
                  <h5>HTML</h5>
                  <div ibox-tools control="iboxTools"></div>
                </div>
                <div class="ibox-content">
                  <ui-codemirror ui-codemirror-opts="share.htmlOptions" >&lt;!-- 在页面中引用微信JS -->
&lt;script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js">&lt;/script></ui-codemirror>
                </div>
              </div>
              
              <div class="ibox">
                  <div class="ibox-title">
                    <h5>Javascript</h5>
                    <div ibox-tools control="iboxTools"></div>
                  </div>
                  <div class="ibox-content">
                    <ol>
                        <li>把微信签名接口封装起来，自动根据H5域名调用【别克，雪佛兰，诚新二手车】微信签名接口</li>
                        <li>不依赖任何第三方JS库，但必须是在引入<code>//res.wx.qq.com/open/js/jweixin-1.0.0.js</code>后执行</li>
                        <li>复制下方封装的JS代码放到head部分，让签名代码优先执行起来</li>
                        <li>默认<code>jsApiList</code>只请求了两个接口（<code>["onMenuShareTimeline", "onMenuShareAppMessage"]</code>），如果项目需要调用更多接口（如：扫描二维码、录音等），请参考<a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html#.E9.99.84.E5.BD.952-.E6.89.80.E6.9C.89JS.E6.8E.A5.E5.8F.A3.E5.88.97.E8.A1.A8" target="_blank">官方文档 <i class="fa fa-external-link"></i></a></li>
                    </ol>
                    <p>方式一：只需要定义title等</p>
                    <ui-codemirror ui-codemirror-opts="share.jsOptions">(function(def){if(!/MicroMessenger/i.test(navigator.userAgent)){console.info("非微信浏览器，微信签名不会执行！");return function(){}}var sDef={base_url:location.href.match(/http[\w:\.\/-]+\w\//)[0]};sDef.title=def.title;sDef.desc=def.desc||"\ufff6";sDef.img=isURL(def.img)?def.img:sDef.base_url+(def.img||"images/share.jpg");sDef.url=def.url||sDef.base_url;sDef.shareCallback=typeof def.shareCallback=="function"?def.shareCallback:function(){};var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){wxConfig(JSON.parse(xhr.responseText))}};if(location.hostname.indexOf("chevrolet.com.cn")!=-1){xhr.open("POST","//www.chevrolet.com.cn/chevy-api/getsign.aspx")}else{if(location.hostname.indexOf("buick.com.cn")!=-1){xhr.open("POST","//www.buick.com.cn/weixinjssign/getbuicksign.aspx")}else{if(location.hostname=="chengxinmobile.saic-gm.com"){xhr.open("POST","//chengxinmobile.saic-gm.com/api/wexinsign.aspx")}}}var formData=new FormData();formData.append("signurl",location.href.replace(/#.*$/ig,""));xhr.send(formData);function isURL(str){return str&&!!str.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g)}function wxConfig(config){config.debug=!!def.debug;config.jsApiList=def.jsApiList||["onMenuShareTimeline","onMenuShareAppMessage"];if(config.debug){alert(JSON.stringify(config))}wx.config(config);wx.ready(wxShare);wx.error(function(res){console.error("wx err: "+res.errMsg)})}function wxShare(value){value=value||{};var cbFn=typeof value.shareCallback=="function"?value.shareCallback:sDef.shareCallback;var link=value.url||sDef.url;var sObj={title:value.title||sDef.title,desc:value.desc||sDef.desc,link:link,imgUrl:value.img||sDef.img,success:cbFn,cancel:cbFn};var url=new URL(link);url.search+="&utm_source=wechat-timeline";sObj.link=url.href;wx.onMenuShareTimeline(sObj);var url=new URL(link);url.search+="&utm_source=wechat-appMessage";sObj.link=url.href;wx.onMenuShareAppMessage(sObj)}return wxShare})
({title:"这是默认的分享标题"});
/*
title     : 必填 分享标题 String
desc      : 选填 分享描述 String（默认值"\ufff6"空白不可见）只在分享给朋友时有作用。
img       : 选填 分享图片，可用http开头的绝对路径或相对路径 String（默认值是当前目录下的"images/share.jpg"）
url       : 选填 分享URL String（默认当前URL，如果指定url，此url必须在同一域名下)
debug     : 选填 是否开启调试 Boolean (默认false)
jsApiList : 选填 权限列表 Array（默认为["onMenuShareTimeline", "onMenuShareAppMessage"]）
shareCallback : 选填 分享到朋友圈或朋友函数回调 Function(value) value值有sendAppMessage:ok,sendAppMessage:cancel,shareTimeline:ok,shareTimeline:cancel，如{"errMsg":"sendAppMessage:ok"}
*/</ui-codemirror><br>
<p>方式二：通过定义的返回函数，可以再定义分享的文字与图片等内容</p>
                    <ui-codemirror ui-codemirror-opts="share.jsOptions">var setWeChatShare = (function(def){if(!/MicroMessenger/i.test(navigator.userAgent)){console.info("非微信浏览器，微信签名不会执行！");return function(){}}var sDef={base_url:location.href.match(/http[\w:\.\/-]+\w\//)[0]};sDef.title=def.title;sDef.desc=def.desc||"\ufff6";sDef.img=isURL(def.img)?def.img:sDef.base_url+(def.img||"images/share.jpg");sDef.url=def.url||sDef.base_url;sDef.shareCallback=typeof def.shareCallback=="function"?def.shareCallback:function(){};var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){wxConfig(JSON.parse(xhr.responseText))}};if(location.hostname.indexOf("chevrolet.com.cn")!=-1){xhr.open("POST","//www.chevrolet.com.cn/chevy-api/getsign.aspx")}else{if(location.hostname.indexOf("buick.com.cn")!=-1){xhr.open("POST","//www.buick.com.cn/weixinjssign/getbuicksign.aspx")}else{if(location.hostname=="chengxinmobile.saic-gm.com"){xhr.open("POST","//chengxinmobile.saic-gm.com/api/wexinsign.aspx")}}}var formData=new FormData();formData.append("signurl",location.href.replace(/#.*$/ig,""));xhr.send(formData);function isURL(str){return str&&!!str.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g)}function wxConfig(config){config.debug=!!def.debug;config.jsApiList=def.jsApiList||["onMenuShareTimeline","onMenuShareAppMessage"];if(config.debug){alert(JSON.stringify(config))}wx.config(config);wx.ready(wxShare);wx.error(function(res){console.error("wx err: "+res.errMsg)})}function wxShare(value){value=value||{};var cbFn=typeof value.shareCallback=="function"?value.shareCallback:sDef.shareCallback;var link=value.url||sDef.url;var sObj={title:value.title||sDef.title,desc:value.desc||sDef.desc,link:link,imgUrl:value.img||sDef.img,success:cbFn,cancel:cbFn};var url=new URL(link);url.search+="&utm_source=wechat-timeline";sObj.link=url.href;wx.onMenuShareTimeline(sObj);var url=new URL(link);url.search+="&utm_source=wechat-appMessage";sObj.link=url.href;wx.onMenuShareAppMessage(sObj)}return wxShare})
({title:"这是默认的分享标题",desc:"这是分享给朋友的描述", img:"images/head3.png", shareCallback:function(value){alert(value.errMsg)});

//可再定义分享内容
setWeChatShare({title:"分享的标题已改变"});
//setWeChatShare({title:"分享的标题已改变", img:"images/xxxx.jpg"});</ui-codemirror>
                  </div>
                </div>
              <div class="ibox">
                <div class="ibox-title">
                  <h5>APP判断脚本</h5>
                  <div ibox-tools control="iboxTools"></div>
                </div>
                <div class="ibox-content">
                  <ui-codemirror ui-codemirror-opts="share.jsOptions">var isWechat = /MicroMessenger/i.test(window.navigator.userAgent);</ui-codemirror>
                </div>
              </div>
              <div class="ibox">
                  <div class="ibox-title">
                    <h5>案例</h5>
                    <div ibox-tools control="iboxTools"></div>
                  </div>
                  <div class="ibox-content">
                    <ul>
                      <li>别克微信签名 DEMO <a href="http://mobiletest.buick.com.cn/act/test/demo1.html" target="_blank">http://mobiletest.buick.com.cn/act/test/demo1.html <i class="fa fa-external-link"></i></a></li>
                      <li>雪佛兰微信签名 DEMO <a href="http://mobiletest.chevrolet.com.cn/act/malibu/malibuxl-perfectlife/demo2.html" target="_blank">http://mobiletest.chevrolet.com.cn/act/malibu/malibuxl-perfectlife/demo2.html <i class="fa fa-external-link"></i></a></li>
                    </ul>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>